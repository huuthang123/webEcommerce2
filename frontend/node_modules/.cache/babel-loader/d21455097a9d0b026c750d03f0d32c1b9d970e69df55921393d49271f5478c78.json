{"ast":null,"code":"var _jsxFileName = \"D:\\\\N\\u0103m 4 K\\xEC 2\\\\Ph\\xE1t tri\\u1EC3n h\\u1EC7 th\\u1ED1ng th\\u01B0\\u01A1ng m\\u1EA1i \\u0111i\\u1EC7n t\\u1EED\\\\ecommerce-app\\\\frontend\\\\src\\\\components\\\\ChatBot.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useCart } from '../context/CartContext';\nimport { GoogleGenerativeAI } from '@google/generative-ai';\nimport './chatbot.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ChatBot() {\n  _s();\n  const [isChatOpen, setIsChatOpen] = useState(false);\n  const [chatMessages, setChatMessages] = useState([]);\n  const [userInput, setUserInput] = useState('');\n  const [isChatLoading, setIsChatLoading] = useState(false);\n  const [hasGreeted, setHasGreeted] = useState(false); // Bi·∫øn ki·ªÉm so√°t vi·ªác ch√†o\n\n  const {\n    cartItems,\n    total,\n    totalItems\n  } = useCart();\n  const genAI = new GoogleGenerativeAI('YOUR_GEMINI_API_KEY'); // Thay b·∫±ng API Key c·ªßa b·∫°n\n  const model = genAI.getGenerativeModel({\n    model: 'gemini-pro'\n  });\n  useEffect(() => {\n    // T·∫°o th√¥ng tin s·∫£n ph·∫©m\n    const productInfo = cartItems.length > 0 ? cartItems.map(item => `${item.name}: ${item.price.toLocaleString()} VND, S·ªë l∆∞·ª£ng: ${item.quantity}, Danh m·ª•c: ${item.category || 'Kh√¥ng x√°c ƒë·ªãnh'}`).join('\\n') : 'Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.';\n\n    // Ch·ªâ ch√†o m·ªôt l·∫ßn khi chatbot kh·ªüi t·∫°o\n    if (!hasGreeted) {\n      setChatMessages([{\n        role: 'model',\n        text: `Xin ch√†o! T√¥i l√† chatbot h·ªó tr·ª£ gi·ªè h√†ng. ƒê√¢y l√† danh s√°ch s·∫£n ph·∫©m trong gi·ªè h√†ng c·ªßa b·∫°n:\\n${productInfo}\\nT·ªïng ti·ªÅn: ${total.toLocaleString()} VND\\nT·ªïng s·ªë l∆∞·ª£ng: ${totalItems}\\nB·∫°n c√≥ th·ªÉ h·ªèi t√¥i c√°c c√¢u nh∆∞: \"S·∫£n ph·∫©m B√≤ Kho gi√° bao nhi√™u?\", \"T·ªïng ti·ªÅn l√† bao nhi√™u?\", ho·∫∑c \"C√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi B√≤ Kho kh√¥ng?\"`\n      }]);\n      setHasGreeted(true); // ƒê√°nh d·∫•u ƒë√£ ch√†o\n    } else {\n      // C·∫≠p nh·∫≠t th√¥ng tin gi·ªè h√†ng m√† kh√¥ng ch√†o l·∫°i\n      setChatMessages(prev => {\n        const updatedMessages = [...prev];\n        if (updatedMessages.length > 0) {\n          updatedMessages[0] = {\n            role: 'model',\n            text: `ƒê√¢y l√† danh s√°ch s·∫£n ph·∫©m trong gi·ªè h√†ng c·ªßa b·∫°n:\\n${productInfo}\\nT·ªïng ti·ªÅn: ${total.toLocaleString()} VND\\nT·ªïng s·ªë l∆∞·ª£ng: ${totalItems}\\nB·∫°n c√≥ th·ªÉ h·ªèi t√¥i c√°c c√¢u nh∆∞: \"S·∫£n ph·∫©m B√≤ Kho gi√° bao nhi√™u?\", \"T·ªïng ti·ªÅn l√† bao nhi√™u?\", ho·∫∑c \"C√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi B√≤ Kho kh√¥ng?\"`\n          };\n        }\n        return updatedMessages;\n      });\n    }\n\n    // T·ª± ƒë·ªông cu·ªôn xu·ªëng tin nh·∫Øn m·ªõi nh·∫•t\n    const chatBox = document.getElementById('chatBox');\n    if (chatBox) {\n      chatBox.scrollTop = chatBox.scrollHeight;\n    }\n  }, [cartItems, total, totalItems, hasGreeted]);\n  const toggleChat = () => {\n    setIsChatOpen(!isChatOpen);\n  };\n  const handleSendMessage = async () => {\n    if (!userInput.trim()) return;\n    setChatMessages(prev => [...prev, {\n      role: 'user',\n      text: userInput\n    }]);\n    setIsChatLoading(true);\n    try {\n      // T·∫°o th√¥ng tin s·∫£n ph·∫©m\n      const productInfo = cartItems.length > 0 ? cartItems.map(item => `${item.name}: ${item.price.toLocaleString()} VND, S·ªë l∆∞·ª£ng: ${item.quantity}, Danh m·ª•c: ${item.category || 'Kh√¥ng x√°c ƒë·ªãnh'}`).join('\\n') : 'Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.';\n\n      // T·∫°o prompt chi ti·∫øt\n      const prompt = `\nB·∫°n l√† m·ªôt chatbot h·ªó tr·ª£ gi·ªè h√†ng th√¢n thi·ªán v√† chuy√™n nghi·ªáp. Nhi·ªám v·ª• c·ªßa b·∫°n l√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng v·ªÅ gi·ªè h√†ng m·ªôt c√°ch ch√≠nh x√°c, t·ª± nhi√™n v√† d·ªÖ hi·ªÉu. D∆∞·ªõi ƒë√¢y l√† th√¥ng tin gi·ªè h√†ng hi·ªán t·∫°i:\n\n**Danh s√°ch s·∫£n ph·∫©m**:\n${productInfo}\n\n**T·ªïng ti·ªÅn**: ${total.toLocaleString()} VND\n**T·ªïng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m**: ${totalItems}\n\n**H∆∞·ªõng d·∫´n**:\n1. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ gi√° c·ªßa m·ªôt s·∫£n ph·∫©m (v√≠ d·ª•: \"S·∫£n ph·∫©m B√≤ Kho gi√° bao nhi√™u?\"), h√£y tr·∫£ l·ªùi ch√≠nh x√°c gi√° c·ªßa s·∫£n ph·∫©m ƒë√≥.\n2. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ s·ªë l∆∞·ª£ng c·ªßa m·ªôt s·∫£n ph·∫©m (v√≠ d·ª•: \"C√≥ bao nhi√™u B√≤ Kho trong gi·ªè h√†ng?\"), h√£y tr·∫£ l·ªùi s·ªë l∆∞·ª£ng ch√≠nh x√°c.\n3. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ t·ªïng ti·ªÅn ho·∫∑c t·ªïng s·ªë l∆∞·ª£ng (v√≠ d·ª•: \"T·ªïng ti·ªÅn l√† bao nhi√™u?\"), h√£y tr·∫£ l·ªùi d·ª±a tr√™n th√¥ng tin t·ªïng ti·ªÅn v√† t·ªïng s·ªë l∆∞·ª£ng.\n4. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ s·∫£n ph·∫©m kh√¥ng c√≥ trong gi·ªè h√†ng (v√≠ d·ª•: \"S·∫£n ph·∫©m G√† R√°n gi√° bao nhi√™u?\" m√† gi·ªè h√†ng kh√¥ng c√≥ G√† R√°n), h√£y tr·∫£ l·ªùi: \"S·∫£n ph·∫©m n√†y hi·ªán kh√¥ng c√≥ trong gi·ªè h√†ng c·ªßa b·∫°n.\"\n5. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ s·∫£n ph·∫©m c√πng lo·∫°i (v√≠ d·ª•: \"C√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi B√≤ Kho kh√¥ng?\"), h√£y t√¨m c√°c s·∫£n ph·∫©m c√≥ c√πng danh m·ª•c v·ªõi s·∫£n ph·∫©m ƒë∆∞·ª£c h·ªèi (d·ª±a tr√™n \"Danh m·ª•c\") v√† c√≥ gi√° ch√™nh l·ªách kh√¥ng qu√° 20,000 VND so v·ªõi s·∫£n ph·∫©m ƒë√≥. N·∫øu c√≥, h√£y g·ª£i √Ω c√°c s·∫£n ph·∫©m ƒë√≥. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi: \"Hi·ªán t·∫°i kh√¥ng c√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi [t√™n s·∫£n ph·∫©m] trong gi·ªè h√†ng c√≥ gi√° ch√™nh l·ªách kh√¥ng qu√° 20,000 VND.\"\n6. N·∫øu ng∆∞·ªùi d√πng h·ªèi c√¢u kh√¥ng li√™n quan (v√≠ d·ª•: \"H√¥m nay th·ªùi ti·∫øt th·∫ø n√†o?\"), h√£y tr·∫£ l·ªùi kh√©o l√©o: \"Xin l·ªói, t√¥i ch·ªâ c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi c√°c c√¢u h·ªèi v·ªÅ gi·ªè h√†ng. B·∫°n mu·ªën h·ªèi g√¨ v·ªÅ s·∫£n ph·∫©m kh√¥ng?\"\n7. Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát, t·ª± nhi√™n v√† th√¢n thi·ªán.\n\n**C√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng**: ${userInput}\n\nH√£y tr·∫£ l·ªùi c√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng m·ªôt c√°ch ch√≠nh x√°c v√† t·ª± nhi√™n.\n            `;\n\n      // G·ªçi Gemini API\n      const result = await model.generateContent(prompt);\n      const response = await result.response;\n      const text = response.text();\n\n      // Th√™m ph·∫£n h·ªìi c·ªßa chatbot v√†o chat\n      setChatMessages(prev => [...prev, {\n        role: 'model',\n        text\n      }]);\n    } catch (error) {\n      console.error('L·ªói khi g·ªçi Gemini API:', error);\n      setChatMessages(prev => [...prev, {\n        role: 'model',\n        text: 'Xin l·ªói, t√¥i kh√¥ng th·ªÉ tr·∫£ l·ªùi ngay b√¢y gi·ªù. Vui l√≤ng th·ª≠ l·∫°i sau!'\n      }]);\n    } finally {\n      setIsChatLoading(false);\n      setUserInput('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-icon\",\n      onClick: toggleChat,\n      children: \"\\uD83D\\uDCAC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `chat-container ${isChatOpen ? '' : 'hidden'}`,\n      id: \"chatContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Chat v\\u1EDBi AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-chat-btn\",\n          onClick: toggleChat,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-times\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-box\",\n        id: \"chatBox\",\n        children: [chatMessages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `chat-message ${msg.role}`,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 29\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }, this)), isChatLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-message model\",\n          children: \"\\u0110ang x\\u1EED l\\xFD...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"userInput\",\n          placeholder: \"Nh\\u1EADp tin nh\\u1EAFn c\\u1EE7a b\\u1EA1n...\",\n          value: userInput,\n          onChange: e => setUserInput(e.target.value),\n          onKeyPress: e => e.key === 'Enter' && handleSendMessage()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSendMessage,\n          children: \"G\\u1EEDi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(ChatBot, \"0abNIkm/GME0fdCzFVWNkXcdEpM=\", false, function () {\n  return [useCart];\n});\n_c = ChatBot;\nexport default ChatBot;\nvar _c;\n$RefreshReg$(_c, \"ChatBot\");","map":{"version":3,"names":["React","useState","useEffect","useCart","GoogleGenerativeAI","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatBot","_s","isChatOpen","setIsChatOpen","chatMessages","setChatMessages","userInput","setUserInput","isChatLoading","setIsChatLoading","hasGreeted","setHasGreeted","cartItems","total","totalItems","genAI","model","getGenerativeModel","productInfo","length","map","item","name","price","toLocaleString","quantity","category","join","role","text","prev","updatedMessages","chatBox","document","getElementById","scrollTop","scrollHeight","toggleChat","handleSendMessage","trim","prompt","result","generateContent","response","error","console","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","id","msg","index","type","placeholder","value","onChange","e","target","onKeyPress","key","_c","$RefreshReg$"],"sources":["D:/NƒÉm 4 K√¨ 2/Ph√°t tri·ªÉn h·ªá th·ªëng th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠/ecommerce-app/frontend/src/components/ChatBot.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\nimport './chatbot.css';\r\n\r\nfunction ChatBot() {\r\n    const [isChatOpen, setIsChatOpen] = useState(false);\r\n    const [chatMessages, setChatMessages] = useState([]);\r\n    const [userInput, setUserInput] = useState('');\r\n    const [isChatLoading, setIsChatLoading] = useState(false);\r\n    const [hasGreeted, setHasGreeted] = useState(false); // Bi·∫øn ki·ªÉm so√°t vi·ªác ch√†o\r\n\r\n    const { cartItems, total, totalItems } = useCart();\r\n\r\n    const genAI = new GoogleGenerativeAI('YOUR_GEMINI_API_KEY'); // Thay b·∫±ng API Key c·ªßa b·∫°n\r\n    const model = genAI.getGenerativeModel({ model: 'gemini-pro' });\r\n\r\n    useEffect(() => {\r\n        // T·∫°o th√¥ng tin s·∫£n ph·∫©m\r\n        const productInfo = cartItems.length > 0\r\n            ? cartItems.map(item => `${item.name}: ${item.price.toLocaleString()} VND, S·ªë l∆∞·ª£ng: ${item.quantity}, Danh m·ª•c: ${item.category || 'Kh√¥ng x√°c ƒë·ªãnh'}`).join('\\n')\r\n            : 'Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.';\r\n\r\n        // Ch·ªâ ch√†o m·ªôt l·∫ßn khi chatbot kh·ªüi t·∫°o\r\n        if (!hasGreeted) {\r\n            setChatMessages([\r\n                { role: 'model', text: `Xin ch√†o! T√¥i l√† chatbot h·ªó tr·ª£ gi·ªè h√†ng. ƒê√¢y l√† danh s√°ch s·∫£n ph·∫©m trong gi·ªè h√†ng c·ªßa b·∫°n:\\n${productInfo}\\nT·ªïng ti·ªÅn: ${total.toLocaleString()} VND\\nT·ªïng s·ªë l∆∞·ª£ng: ${totalItems}\\nB·∫°n c√≥ th·ªÉ h·ªèi t√¥i c√°c c√¢u nh∆∞: \"S·∫£n ph·∫©m B√≤ Kho gi√° bao nhi√™u?\", \"T·ªïng ti·ªÅn l√† bao nhi√™u?\", ho·∫∑c \"C√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi B√≤ Kho kh√¥ng?\"` }\r\n            ]);\r\n            setHasGreeted(true); // ƒê√°nh d·∫•u ƒë√£ ch√†o\r\n        } else {\r\n            // C·∫≠p nh·∫≠t th√¥ng tin gi·ªè h√†ng m√† kh√¥ng ch√†o l·∫°i\r\n            setChatMessages(prev => {\r\n                const updatedMessages = [...prev];\r\n                if (updatedMessages.length > 0) {\r\n                    updatedMessages[0] = {\r\n                        role: 'model',\r\n                        text: `ƒê√¢y l√† danh s√°ch s·∫£n ph·∫©m trong gi·ªè h√†ng c·ªßa b·∫°n:\\n${productInfo}\\nT·ªïng ti·ªÅn: ${total.toLocaleString()} VND\\nT·ªïng s·ªë l∆∞·ª£ng: ${totalItems}\\nB·∫°n c√≥ th·ªÉ h·ªèi t√¥i c√°c c√¢u nh∆∞: \"S·∫£n ph·∫©m B√≤ Kho gi√° bao nhi√™u?\", \"T·ªïng ti·ªÅn l√† bao nhi√™u?\", ho·∫∑c \"C√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi B√≤ Kho kh√¥ng?\"`\r\n                    };\r\n                }\r\n                return updatedMessages;\r\n            });\r\n        }\r\n\r\n        // T·ª± ƒë·ªông cu·ªôn xu·ªëng tin nh·∫Øn m·ªõi nh·∫•t\r\n        const chatBox = document.getElementById('chatBox');\r\n        if (chatBox) {\r\n            chatBox.scrollTop = chatBox.scrollHeight;\r\n        }\r\n    }, [cartItems, total, totalItems, hasGreeted]);\r\n\r\n    const toggleChat = () => {\r\n        setIsChatOpen(!isChatOpen);\r\n    };\r\n\r\n    const handleSendMessage = async () => {\r\n        if (!userInput.trim()) return;\r\n\r\n        setChatMessages(prev => [...prev, { role: 'user', text: userInput }]);\r\n        setIsChatLoading(true);\r\n\r\n        try {\r\n            // T·∫°o th√¥ng tin s·∫£n ph·∫©m\r\n            const productInfo = cartItems.length > 0\r\n                ? cartItems.map(item => `${item.name}: ${item.price.toLocaleString()} VND, S·ªë l∆∞·ª£ng: ${item.quantity}, Danh m·ª•c: ${item.category || 'Kh√¥ng x√°c ƒë·ªãnh'}`).join('\\n')\r\n                : 'Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.';\r\n\r\n            // T·∫°o prompt chi ti·∫øt\r\n            const prompt = `\r\nB·∫°n l√† m·ªôt chatbot h·ªó tr·ª£ gi·ªè h√†ng th√¢n thi·ªán v√† chuy√™n nghi·ªáp. Nhi·ªám v·ª• c·ªßa b·∫°n l√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng v·ªÅ gi·ªè h√†ng m·ªôt c√°ch ch√≠nh x√°c, t·ª± nhi√™n v√† d·ªÖ hi·ªÉu. D∆∞·ªõi ƒë√¢y l√† th√¥ng tin gi·ªè h√†ng hi·ªán t·∫°i:\r\n\r\n**Danh s√°ch s·∫£n ph·∫©m**:\r\n${productInfo}\r\n\r\n**T·ªïng ti·ªÅn**: ${total.toLocaleString()} VND\r\n**T·ªïng s·ªë l∆∞·ª£ng s·∫£n ph·∫©m**: ${totalItems}\r\n\r\n**H∆∞·ªõng d·∫´n**:\r\n1. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ gi√° c·ªßa m·ªôt s·∫£n ph·∫©m (v√≠ d·ª•: \"S·∫£n ph·∫©m B√≤ Kho gi√° bao nhi√™u?\"), h√£y tr·∫£ l·ªùi ch√≠nh x√°c gi√° c·ªßa s·∫£n ph·∫©m ƒë√≥.\r\n2. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ s·ªë l∆∞·ª£ng c·ªßa m·ªôt s·∫£n ph·∫©m (v√≠ d·ª•: \"C√≥ bao nhi√™u B√≤ Kho trong gi·ªè h√†ng?\"), h√£y tr·∫£ l·ªùi s·ªë l∆∞·ª£ng ch√≠nh x√°c.\r\n3. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ t·ªïng ti·ªÅn ho·∫∑c t·ªïng s·ªë l∆∞·ª£ng (v√≠ d·ª•: \"T·ªïng ti·ªÅn l√† bao nhi√™u?\"), h√£y tr·∫£ l·ªùi d·ª±a tr√™n th√¥ng tin t·ªïng ti·ªÅn v√† t·ªïng s·ªë l∆∞·ª£ng.\r\n4. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ s·∫£n ph·∫©m kh√¥ng c√≥ trong gi·ªè h√†ng (v√≠ d·ª•: \"S·∫£n ph·∫©m G√† R√°n gi√° bao nhi√™u?\" m√† gi·ªè h√†ng kh√¥ng c√≥ G√† R√°n), h√£y tr·∫£ l·ªùi: \"S·∫£n ph·∫©m n√†y hi·ªán kh√¥ng c√≥ trong gi·ªè h√†ng c·ªßa b·∫°n.\"\r\n5. N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ s·∫£n ph·∫©m c√πng lo·∫°i (v√≠ d·ª•: \"C√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi B√≤ Kho kh√¥ng?\"), h√£y t√¨m c√°c s·∫£n ph·∫©m c√≥ c√πng danh m·ª•c v·ªõi s·∫£n ph·∫©m ƒë∆∞·ª£c h·ªèi (d·ª±a tr√™n \"Danh m·ª•c\") v√† c√≥ gi√° ch√™nh l·ªách kh√¥ng qu√° 20,000 VND so v·ªõi s·∫£n ph·∫©m ƒë√≥. N·∫øu c√≥, h√£y g·ª£i √Ω c√°c s·∫£n ph·∫©m ƒë√≥. N·∫øu kh√¥ng, h√£y tr·∫£ l·ªùi: \"Hi·ªán t·∫°i kh√¥ng c√≥ s·∫£n ph·∫©m n√†o c√πng lo·∫°i v·ªõi [t√™n s·∫£n ph·∫©m] trong gi·ªè h√†ng c√≥ gi√° ch√™nh l·ªách kh√¥ng qu√° 20,000 VND.\"\r\n6. N·∫øu ng∆∞·ªùi d√πng h·ªèi c√¢u kh√¥ng li√™n quan (v√≠ d·ª•: \"H√¥m nay th·ªùi ti·∫øt th·∫ø n√†o?\"), h√£y tr·∫£ l·ªùi kh√©o l√©o: \"Xin l·ªói, t√¥i ch·ªâ c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi c√°c c√¢u h·ªèi v·ªÅ gi·ªè h√†ng. B·∫°n mu·ªën h·ªèi g√¨ v·ªÅ s·∫£n ph·∫©m kh√¥ng?\"\r\n7. Tr·∫£ l·ªùi b·∫±ng ti·∫øng Vi·ªát, t·ª± nhi√™n v√† th√¢n thi·ªán.\r\n\r\n**C√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng**: ${userInput}\r\n\r\nH√£y tr·∫£ l·ªùi c√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng m·ªôt c√°ch ch√≠nh x√°c v√† t·ª± nhi√™n.\r\n            `;\r\n\r\n            // G·ªçi Gemini API\r\n            const result = await model.generateContent(prompt);\r\n            const response = await result.response;\r\n            const text = response.text();\r\n\r\n            // Th√™m ph·∫£n h·ªìi c·ªßa chatbot v√†o chat\r\n            setChatMessages(prev => [...prev, { role: 'model', text }]);\r\n        } catch (error) {\r\n            console.error('L·ªói khi g·ªçi Gemini API:', error);\r\n            setChatMessages(prev => [...prev, { role: 'model', text: 'Xin l·ªói, t√¥i kh√¥ng th·ªÉ tr·∫£ l·ªùi ngay b√¢y gi·ªù. Vui l√≤ng th·ª≠ l·∫°i sau!' }]);\r\n        } finally {\r\n            setIsChatLoading(false);\r\n            setUserInput('');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"chat-icon\" onClick={toggleChat}>\r\n                üí¨\r\n            </div>\r\n            <div className={`chat-container ${isChatOpen ? '' : 'hidden'}`} id=\"chatContainer\">\r\n                <div className=\"chat-header\">\r\n                    <h2>Chat v·ªõi AI</h2>\r\n                    <button className=\"close-chat-btn\" onClick={toggleChat}>\r\n                        <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                </div>\r\n                <div className=\"chat-box\" id=\"chatBox\">\r\n                    {chatMessages.map((msg, index) => (\r\n                        <div key={index} className={`chat-message ${msg.role}`}>\r\n                            <p>{msg.text}</p>\r\n                        </div>\r\n                    ))}\r\n                    {isChatLoading && <div className=\"chat-message model\">ƒêang x·ª≠ l√Ω...</div>}\r\n                </div>\r\n                <div className=\"input-group\">\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"userInput\"\r\n                        placeholder=\"Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n...\"\r\n                        value={userInput}\r\n                        onChange={(e) => setUserInput(e.target.value)}\r\n                        onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                    />\r\n                    <button onClick={handleSendMessage}>G·ª≠i</button>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ChatBot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}